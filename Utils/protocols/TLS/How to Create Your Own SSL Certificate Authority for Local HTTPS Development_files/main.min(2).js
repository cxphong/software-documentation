"use strict";!function($){var BRAINS={nav_arrows:['<svg class="icon icon-chevron-left"><use xlink:href="#icon-chevron-left"></use></svg>','<svg class="icon icon-chevron-right"><use xlink:href="#icon-chevron-right"></use></svg>'],init:function(){if(BRAINS.accordion($(".dbi-how-it-works")),BRAINS.coupons(),BRAINS.carousels(),BRAINS.masonry(),BRAINS.pricing_faqs($(".dbi-pricing__faq")),BRAINS.setup_resp_nav(),BRAINS.sticky_product_menu(),BRAINS.subscribe_form(),BRAINS.hash_links(),BRAINS.external_links(),BRAINS.faq_anchors($(".dbi-faq")),BRAINS.ga_event_tracking(),BRAINS.tooltips(),BRAINS.table_wrapper(),BRAINS.anchor_image_style_fix(),BRAINS.switches(),window.matchMedia("(max-width: 768px)").matches&&BRAINS.nav_scroll_down(),"undefined"!=typeof Tablesaw&&($(document).trigger("enhance.tablesaw"),Tablesaw.config={swipe:{horizontalThreshold:15,verticalThreshold:20}}),"undefined"!=typeof lity){var toggle_lity_trigger=function(){$(".dbi-mob-no-lity").length&&($(window).width()<500?$(".dbi-mob-no-lity").removeAttr("data-lity"):$(".dbi-mob-no-lity").attr("data-lity",""))};$(document).on("lity:open",function(event,lightbox,trigger){$(".lity-container").append('<button class="lity-close lity-close--bottom" type="button" title="Close (Esc)" data-lity-close>close</button>')}),$(document).on("ready",function(){toggle_lity_trigger()}),$(window).resize(function(){toggle_lity_trigger()})}},sticky_product_menu:function(){$(".dbi-menu--product").each(function(){var $this=$(this),top=$this.offset().top,d=function(){var scrolltop=BRAINS.get_scrolltop();top<scrolltop?$this.addClass("sticky"):$this.removeClass("sticky")};d(),$(window).scroll(d)})},get_scrolltop:function(){var window_scrolltop=$(window).scrollTop();return BRAINS.has_admin_bar()&&(window_scrolltop+=32),BRAINS.has_notice()&&(window_scrolltop-=BRAINS.get_alert_bars_height()),window_scrolltop},has_admin_bar:function(){return 0<$("body.admin-bar").length},has_notice:function(){return 0<$(".alert-bar").not(".alert-bar-footer").length},get_alert_bars_height:function(){var $alert_bars=$(".alert-bar").not(".alert-bar-footer").filter(":visible"),height=0;return $alert_bars.length<=0||$alert_bars.each(function(){$(this);height+=$(this).outerHeight()}),height},subscribe_form:function(){$("body").on("focus",".dbi-welcome-signup__input-email",function(){$(this).closest("form").find(".dbi-welcome-signup__input-hidden").removeClass("dbi-welcome-signup__input-hidden")}),$("body").on("focus",".drip-signup input[type=email]",function(){$(this).closest("form").addClass("expanded")}),$("body").on("submit",".drip-signup",function(){var $form=$(this).closest("form"),$errors=$form.prev(".dbi__signup-errors");if(!$form.hasClass("expanded"))return $form.addClass("expanded").find("input").first().focus(),!1;var allow_submit=!0;return $form.find("input[type=email], input[type=text]").each(function(){var $input=$(this);if($input.data("error-text")&&0===$input.val().length)return $errors.text("Please enter your "+$input.data("error-text")+".").show(),allow_submit=!1}),allow_submit&&($form.find('input[type="submit"]').attr("disabled",!0),$errors.hide()),allow_submit})},nav_scroll_down:function(){var didScroll,lastScrollTop=0,navbar=$(".dbi-site_header"),navbarHeight=navbar.outerHeight();$(window).scroll(function(){didScroll=!0}),setInterval(function(){didScroll&&(!function(){var st=$(this).scrollTop();if(Math.abs(lastScrollTop-st)<=5)return;lastScrollTop<st&&navbarHeight<st?navbar.addClass("nav-up"):st+$(window).height()<$(document).height()&&navbar.removeClass("nav-up");lastScrollTop=st}(),didScroll=!1)},250)},carousels:function(){$(window).load(function(){$(".dbi-features__feature__carousel").owlCarousel({items:1,nav:!0,autoHeight:!0,lazyLoad:!0,rewind:!0,dotsContainer:".dbi-features__feature__carousel-dots",navText:['<svg class="icon icon-chevron-left"><use xlink:href="#icon-chevron-left"></use></svg>','<svg class="icon icon-chevron-right"><use xlink:href="#icon-chevron-right"></use></svg>']})}),$(".dbi-plugin-card__reviews .owl-carousel").owlCarousel({items:1}),$(".dbi-plugin-tweets:not(.no-carousel)").addClass("owl-carousel").owlCarousel({autoplay:!0,onInitialized:function(event){var $items=$(".owl-item",event.target),max_height=0;$items.each(function(){var height=$(".dbi-media",this).height();max_height<height&&(max_height=height)}),$items.each(function(item){$(".dbi-media",this).height(max_height)})},responsive:{0:{items:1},768:{items:1,margin:15},1024:{items:1,margin:30}}}),$("#pricing-carousel").owlCarousel({startPosition:4,responsive:{0:{items:1,slideBy:1,startPosition:2},768:{items:2,slideBy:2,startPosition:2},1024:{items:3,slideBy:3,startPosition:3},1340:{items:4,slideBy:4}},rewindNav:!1,nav:!0,navText:BRAINS.nav_arrows}),$("#os3-pricing-carousel").owlCarousel({startPosition:4,responsive:{0:{items:1,slideBy:1},450:{items:2,slideBy:2},700:{items:3,slideBy:3},1e3:{items:4,slideBy:4,startPosition:3},1100:{items:5,slideBy:5}},rewindNav:!1,nav:!0,navText:BRAINS.nav_arrows,dots:!1}),$("#oses-pricing-carousel").owlCarousel({startPosition:4,responsive:{0:{items:1,slideBy:1},450:{items:2,slideBy:2},700:{items:3,slideBy:3},1e3:{items:4,slideBy:4,startPosition:3},1100:{items:5,slideBy:5}},rewindNav:!1,nav:!0,navText:BRAINS.nav_arrows,dots:!1})},coupons:function(){if("undefined"!=typeof dbi_product_ids){var $table=$(".dbi-pricing__table");$table.length&&$.ajax({url:woocommerce_params.ajax_url,method:"GET",dataType:"JSON",cache:!1,data:{action:"get_discount_for_pricing_page",product_ids:dbi_product_ids},success:function(result){result&&null!=result.discounted_prices&&($(".dbi-notice__auto-discount-notice").remove(),$table.before('<div class="dbi-notice__discount-notice">'+result.discount_notice+"</div>"),$.each(result.discounted_prices,function(product_id,price){var $price=$(".dbi-price__"+product_id);$price.html('<span class="dbi-price__original">'+$price.data("price")+"</span>$"+price)}))}})}},accordion:function(el){var img=el.find(".dbi-accordion__image");img.clone().addClass("dbi-accordion__image--hidden").insertAfter(img);el.find(".dbi-accordion__title").on("click",function(){var $this=$(this),$content=$this.next(),img_url=$this.next().data("image"),vis_img=el.find(".dbi-accordion__image").not(".dbi-accordion__image--hidden"),hid_img=el.find(".dbi-accordion__image--hidden");$content.hasClass("open")?($this.removeClass("open"),$content.height($content.height("auto")).animate({height:0},250,function(){$(this).removeClass("open")})):($this.addClass("open"),$content.animate({height:$content.get(0).scrollHeight},250,function(){$(this).height("auto").addClass("open")})),hid_img.prop("src",img_url).removeClass("dbi-accordion__image--hidden"),vis_img.addClass("dbi-accordion__image--hidden"),el.find(".dbi-accordion__title.open").not($this).removeClass("open").next().animate({height:0},250,function(){$(this).removeClass("open")})})},masonry:function(){var $wrapper=$(".masonry-grid");$wrapper.length<=0||$wrapper.masonry({itemSelector:".masonry-grid__item",columnWidth:".masonry-grid__item--sizer",percentPosition:!0,transitionDuration:0})},pricing_faqs:function(el){el.find(".dbi-faq-read-more").on("click",function(e){e.preventDefault();var $masonry_grid=el.find(".masonry-grid");el.hasClass("dbi-faq--show-hidden")?($(this).text("Read More FAQs"),$("html,body").animate({scrollTop:el.offset().top-73},400)):$(this).text("Show less FAQs"),el.toggleClass("dbi-faq--show-hidden"),0<$masonry_grid.length&&$masonry_grid.masonry("layout")})},setup_resp_nav:function(){if($("#main-nav").length){var nav=responsiveNav("#main-nav",{label:"<svg class='icon icon-navicon'><use xlink:href='#icon-navicon'></use></svg> <span>Menu</span>",animate:!1});$("#main-nav").on("click",".nav-arrow",function(e){var $this=$(this);return e.stopPropagation(),e.preventDefault(),$this.parent().toggleClass("open"),nav.resize(),!1}),$("body").on("click",function(e){$("html").hasClass("js-nav-active")&&($(e.target).closest(".dbi-site__nav").length||nav.close())})}},hash_links:function(){if(!($("body").hasClass("page-template-page-wp-offload-media-pricing")||$("body").hasClass("page-template-page-wp-offload-ses-pricing")||$("body").hasClass("page-template-page-wp-migrate-db-pro-pricing"))){var menu_offset=100;($("body").hasClass("wp-offload-media")||$("body").hasClass("wp-offload-ses")||$("body").hasClass("page-template-page-wp-offload-ses-upgrade")||$("body").hasClass("wp-migrate-db-pro"))&&(menu_offset=150),$(window).load(function(){var $target=$(document.location.hash);if($target[0]){var target_top=$target.offset().top;window.setTimeout(function(){var scroll_top=$(window).scrollTop();Math.abs(target_top-scroll_top)<1&&$(window).scrollTop(target_top-menu_offset)},100)}}),$(window).on("hashchange",function(){var $target=$(document.location.hash);if($target[0]){var offset=$target.offset();window.setTimeout(function(){$(window).scrollTop(offset.top-menu_offset)},100)}})}},external_links:function(){$("a:not(.dbi-site__nav a)").filter(function(){return this.hostname&&this.hostname!==location.hostname}).attr("target","_blank")},faq_anchors:function(el){var $questions=$(".dbi-faq__question",el),$masonry_grid=$(".masonry-grid",el);$questions.each(function(){$(this).data("id")&&$(this).find("span").append(' <a href="#'+$(this).data("id")+'" class="dbi-faq__question__anchor">&#8734;</a>');var $example=$(this).next().find(".example");$example[0]&&($example.hide(),$('<a href="#">For example...</a>').insertAfter($example).click(function(e){return e.preventDefault(),$example.show(),$(this).remove(),0<$masonry_grid.length&&$masonry_grid.masonry("layout"),!1}),0<$masonry_grid.length&&$masonry_grid.masonry("layout"))})},ga_event_tracking:function(){"undefined"!=typeof ga&&($("body").on("click","#os3-pricing-carousel .owl-prev",function(){ga("send","event","slider buttons","clicked","OS3 left")}),$("body").on("click","#os3-pricing-carousel .owl-next",function(){ga("send","event","slider buttons","clicked","OS3 right")}),$("body").on("click","#oses-pricing-carousel .owl-prev",function(){ga("send","event","slider buttons","clicked","SES left")}),$("body").on("click","#oses-pricing-carousel .owl-next",function(){ga("send","event","slider buttons","clicked","SES right")}),$("body").on("click",".dbi-video-play",function(){ga("send","event","videos","clicked",$(this).data("label"))}),$("body").on("click","a",function(e){if(this.hostname&&this.hostname!==location.hostname){var url=$(this).attr("href");ga("send","event","outbound","click",url,{transport:"beacon",hitCallback:function(){document.location=url}}),e.preventDefault()}}))},tooltips:function(){var $tooltip=$('<div class="dbi-tooltip"></div>');$("body").append($tooltip),$("[data-tooltip]").hover(function(){var $anchor=$(this),$col=$anchor.parents(".owl-item"),position=$anchor.offset();1==$col.css("opacity")&&$tooltip.html($anchor.data("tooltip")).css({left:position.left+$anchor.outerWidth()/2-$tooltip.outerWidth()/2+"px",top:position.top-$tooltip.outerHeight()-5+"px"}).show()},function(){$tooltip.hide()})},table_wrapper:function(){$(".dbi-blog__post table").wrap('<div class="dbi-table-wrap"></div>')},anchor_image_style_fix:function(){$(".dbi-blog__post a img").parent().addClass("dbi-image-anchor")},switches:function(){$(".wcss-Switch-widget").each(function(){var $widget=$(this),$radios=$('input[type="radio"]',$widget);$widget.hide();var $switch=$('\t\t\t<div class="wcss-Switch">\t\t\t\t<span class="wcss-Switch-off">OFF</span>\t\t\t\t<span class="wcss-Switch-on">ON</span>\t\t\t</div>\t\t');function update_status(status){"1"==status?$switch.addClass("wcss-Switch-status-on"):$switch.removeClass("wcss-Switch-status-on")}$widget.after($switch),update_status($radios.filter(":checked").val()),$switch.on("click",function(){var new_value="1";"1"==$radios.filter(":checked").val()&&(new_value="0"),$radios.each(function(){new_value==$(this).val()&&($(this).prop("checked",!0),$(this).trigger("change"))}),update_status(new_value)})})}};BRAINS.init()}(jQuery);